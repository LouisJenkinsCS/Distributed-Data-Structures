

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Collection &mdash; chpldoc 0.0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="chpldoc 0.0.1 documentation" href="../../index.html"/>
        <link rel="next" title="DistributedBag" href="DistributedBag.html"/>
        <link rel="prev" title="chpldoc documentation" href="../../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> chpldoc
          

          
          </a>

          
            
            
              <div class="version">
                0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">chpldoc documentation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="DistributedBag.html">DistributedBag</a></li>
<li class="toctree-l1"><a class="reference internal" href="DistributedDeque.html">DistributedDeque</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">chpldoc</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
    <li>Collection</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/modules/collections/Collection.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-Collection"></span><div class="section" id="collection">
<h1>Collection<a class="headerlink" href="#collection" title="Permalink to this headline">¶</a></h1>
<p><strong>Usage</strong></p>
<div class="highlight-chapel"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Collection</span><span class="p">;</span>
</pre></div>
</div>
<p>A &#8216;Collection&#8217; is an interface for a data structure that is a &#8216;contract&#8217; between
the user and implementer that it fulfills the following:</p>
<ol class="arabic simple">
<li>Is safe parallel-safe, hence is safe to use across multiple tasks across multiple locales.</li>
<li>Supports the basic operations that any data structure needs to be truly useful, that is:</li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li>Insertion of an arbitrary element. From this, we can insert bulk arbitrary elements.</li>
<li>Removal of an arbitrary element. From this, we can remove bulk arbitrary elements.</li>
<li>Iteration over all elements. From this, we can perform lookups over all elements.</li>
</ol>
</div></blockquote>
<p>From the standpoint of the user, who directly benefits, they obtain a very nice but minimal
guarantee on the object they are using, and from the implementor&#8217;s view, they get to the
benefit from both implementing a well-design interface, and from getting some utility methods
&#8216;for-free&#8217;.</p>
<dl class="class">
<dt id="Collection.CollectionImpl">
<em class="property">class </em><code class="descname">CollectionImpl</code><a class="headerlink" href="#Collection.CollectionImpl" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="Collection.CollectionImpl.eltType">
<em class="property">type </em><code class="descname">eltType</code><a class="headerlink" href="#Collection.CollectionImpl.eltType" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of element that this Collection holds.</p>
</dd></dl>

<dl class="method">
<dt id="Collection.CollectionImpl.add">
<em class="property">proc </em><code class="descname">add</code><span class="sig-paren">(</span><em>elt: eltType</em><span class="sig-paren">)</span>: bool<a class="headerlink" href="#Collection.CollectionImpl.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an element to this data structure.</p>
</dd></dl>

<dl class="method">
<dt id="Collection.CollectionImpl.addBulk">
<em class="property">proc </em><code class="descname">addBulk</code><span class="sig-paren">(</span><em>elts</em><span class="sig-paren">)</span>: int<a class="headerlink" href="#Collection.CollectionImpl.addBulk" title="Permalink to this definition">¶</a></dt>
<dd><p>Add all elements in bulk to this data structure. If the data structure
rejects an element, we cease to offer more. We return the number of elements
successfully added to this data structure.</p>
<p><strong>Warning:</strong> While this method will add as many items as possible, it will <cite>break</cite>
when it is unable to consume more elements. Due to the fact that using <cite>break</cite> in
an iterator will cause a memory leak and potentially leave this data structure in
a undefined state, this should not be used to append another data structure to a
bounded structure unless it is known it will succeed.</p>
</dd></dl>

<dl class="method">
<dt id="Collection.CollectionImpl.remove">
<em class="property">proc </em><code class="descname">remove</code><span class="sig-paren">(</span><span class="sig-paren">)</span>: (bool, eltType)<a class="headerlink" href="#Collection.CollectionImpl.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes an arbitrary element from this data structure.</p>
<p><strong>BUG:</strong> Compiler will segfault if the returned value is not captured at callsite.
Issue: #6542</p>
<p><strong>FIX:</strong> Ensure that you always capture the return value...</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>var capturedRetval = c.remove()
</pre></div>
</div>
<p><strong>BUG:</strong> Loop Invariant Code Motion causes undefined behavior if assigned to a
variable declared outside of loop. Issue: #7003</p>
<p><strong>FIX:</strong> Use the <cite>&#8211;no-loop-invariant-code-motion</cite> to disable LICM.
Otherwise, just make sure you always capture the return value inside of a loop
in a variable not declared outside of loop...</p>
<div class="highlight-chapel"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="nx">i</span> <span class="kd">in</span> <span class="mi">1</span> <span class="o">..</span> <span class="nx">N</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">retval</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>BUG:</strong> Sometimes the compiler will produce an internal error related to &#8216;visibility blocks&#8217;,
this can be resolved by declaring the return type rather than letting the compiler infer it.
The exact cause has yet to be found.</p>
<div class="highlight-chapel"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">retval</span> <span class="p">:</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="nx">eltType</span><span class="p">)</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="Collection.CollectionImpl.removeBulk">
<em class="property">proc </em><code class="descname">removeBulk</code><span class="sig-paren">(</span><em>nElts: int</em><span class="sig-paren">)</span><a class="headerlink" href="#Collection.CollectionImpl.removeBulk" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes <cite>nElts</cite> elements from this data structure, returning them as an array.
If the data structure fails to produce a new element, we cease and shrink the array
to its appropriate size and return that.</p>
</dd></dl>

<dl class="method">
<dt id="Collection.CollectionImpl.contains">
<em class="property">proc </em><code class="descname">contains</code><span class="sig-paren">(</span><em>elt: eltType</em><span class="sig-paren">)</span>: bool<a class="headerlink" href="#Collection.CollectionImpl.contains" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether an element exists in this collection.</p>
</dd></dl>

<dl class="method">
<dt id="Collection.CollectionImpl.clear">
<em class="property">proc </em><code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Collection.CollectionImpl.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears all elements in this collection.</p>
</dd></dl>

<dl class="method">
<dt id="Collection.CollectionImpl.isEmpty">
<em class="property">proc </em><code class="descname">isEmpty</code><span class="sig-paren">(</span><span class="sig-paren">)</span>: bool<a class="headerlink" href="#Collection.CollectionImpl.isEmpty" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if this data structure is empty.</p>
</dd></dl>

<dl class="method">
<dt id="Collection.CollectionImpl.length">
<em class="property">proc </em><code class="descname">length</code>: int<a class="headerlink" href="#Collection.CollectionImpl.length" title="Permalink to this definition">¶</a></dt>
<dd><p>Syntactic sugar for <cite>getSize</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="Collection.CollectionImpl.size">
<em class="property">proc </em><code class="descname">size</code>: int<a class="headerlink" href="#Collection.CollectionImpl.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Syntactic sugar for <cite>getSize</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="Collection.CollectionImpl.getSize">
<em class="property">proc </em><code class="descname">getSize</code><span class="sig-paren">(</span><span class="sig-paren">)</span>: int<a class="headerlink" href="#Collection.CollectionImpl.getSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain the number of elements contained in this collection.</p>
</dd></dl>

<dl class="itermethod">
<dt id="Collection.CollectionImpl.these">
<em class="property">iter </em><code class="descname">these</code><span class="sig-paren">(</span><span class="sig-paren">)</span>: eltType<a class="headerlink" href="#Collection.CollectionImpl.these" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all elements in the data structure.</p>
<p><strong>BUG:</strong> Compiler does not currently allow overriding standalone or leader/follower
iterators, and as such only serial iterators may be used with the base type. See
issue #6998</p>
<p><strong>BUG:</strong> Resources are not properly cleaned up when the user breaks or returns
from a serial iterator, and so this <em>must</em> be avoided at all cost. See issue #6912</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt>
<code class="descname">proc +=(ref c: CollectionImpl(?eltType), elt: eltType)</code></dt>
<dd><p>Syntactic sugar for &#8216;add&#8217;.</p>
<p><strong>BUG:</strong> Compiler produces a warning that <cite>c</cite> should be a <cite>ref</cite>, when it is not needed
because it is a class and can be used by value. Need a pragma to disable this?
As such, this cannot be used where <cite>ref</cite> intents cannot be used, such as <code class="docutils literal"><span class="pre">forall</span></code>
and <code class="docutils literal"><span class="pre">coforall</span></code> loops.</p>
</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="DistributedBag.html" class="btn btn-neutral float-right" title="DistributedBag" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../index.html" class="btn btn-neutral" title="chpldoc documentation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 



</body>
</html>